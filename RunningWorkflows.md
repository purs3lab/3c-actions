## Running workflows

This document provides instructions on running GitHub workflows that can generate the results (in the form of Github workflow artifacts) for all the benchmarks in the paper.

First, make sure that you complete the instructions for self-hosted machine setup.

We need to run 3 workflows to get all the results :

-   Exhaustive testing and Performance Stats
-   Exhaustive testing and Performance Stats (CCured)
-   Exhaustive testing and Performance Stats (Least and Greatest)

### For each workflow

First, you need to enable the workflow by going under `Actions` tab by following the [instructions on GitHub](https://docs.github.com/en/actions/managing-workflow-runs/disabling-and-enabling-a-workflow#enabling-a-workflow).


Next, under the `Actions` tab, select the above workflow and select `Run Workflow` and provide the following information in the branch fields:


![Workflow run config](https://github.com/purs3lab/3c-actions/raw/main/pics/workflowrunconfig.png)


Then select `Run Workflow` and **wait till the workflow completes** (approximately in ~40 min on a 32 core machine).

### Downloading artifacts
After the workflow completes, you will have 92 artifacts (i.e., zip files containing results for each program in our benchmark) generated by the workflow.

You need to download these artifacts.

Our suggestion is to use the script `stats_scripts/generate_pointer_stats.py` to download all these artifacts using the run id. You can get the run id from the URL of the corresponding workflow run, i.e., `.../actions/runs/1646911527`. Here the run id is `1646911527`.

#### Update github token
First, [create a Github token](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token) (having workflow access) and update it in `stats_scripts/generate_pointer_stats.py`.
Specifically, modify the following line:
```
GIT_TOKEN = None
```
to
```
GIT_TOKEN = <token_value>
```

#### Running the download script
Next run the download script:
```
python3.8 stats_scripts/generate_pointer_stats.py <run_id> <path_to_folder_where_artifacts_need_to_be_stored>
```
This will download all 92 artifacts  into the provided folder.

### Delete the workflow run

To avoid reaching space limits on GitHub, [delete the workflow run](https://docs.github.com/en/actions/managing-workflow-runs/deleting-a-workflow-run).

Next continue to next workflow untill you finished downloading artifacts of all the workflows.
